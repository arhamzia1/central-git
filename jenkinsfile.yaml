pipeline:
  agent:
    label: "docker"

  environment:
    IMAGE_NAME: "my-docker-image"
    DOCKER_USER: "your-dockerhub-username"
    DOCKER_PASS: "${DOCKER_HUB_PASSWORD}"

  stages:
    - stage: Build Docker Image
      steps:
        - sh: |
            echo "Building Docker image..."
            docker build -t $DOCKER_USER/$IMAGE_NAME:latest .
    - stage: Docker Login
      steps:
        - sh: |
            echo "$DOCKER_PASS" | docker login -u "$DOCKER_USER" --password-stdin
    - stage: Push Docker Image
      steps:
        - sh: |
            docker push $DOCKER_USER/$IMAGE_NAME:latest

